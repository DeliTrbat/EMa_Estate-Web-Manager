class SearchHandler{static resizeHandler(){window.innerWidth<=1220?SearchHandler.itemsElement.classList.add("chubby-items"):SearchHandler.itemsElement.classList.remove("chubby-items")}static toApiParams(){var dropdownParams=Object.entries(Options.dropdown).filter(([,op])=>"none"!=op.element.style.display&&op.isSelected()).map(([key,op])=>key+"="+SearchHandler.dropdownMapToString[key][op.getOption().index]),sliderParams=Object.entries(Options.slider).filter(([,op])=>"none"!=op.element.style.display&&op.isSelected()).map(([key,op])=>Object.entries(op.getOption()).map(([minmax,value])=>""+key+minmax+"="+value).join("&"));return"?"+[...dropdownParams,...sliderParams].join("&")}static addItem(itemData){const item=Item.create(itemData),toIcon=createIcon("next");item.appendChild(toIcon),toIcon.setAttribute("onclick",""),SearchHandler.itemsElement.appendChild(item),toIcon.onclick=()=>ProximityMapHandler.setTo(itemData.lon,itemData.lat)}static getItems(){var url="/api/items/filter"+SearchHandler.toApiParams();fetch(url).then(response=>response.json()).then(data=>data.forEach(val=>SearchHandler.addItem(val)))}}SearchHandler.itemsElement=document.getElementById("items"),SearchHandler.dropdownMapToString={apType:["","detached","semi-detached","non-detached","circular","open-space"],type:["apartment","house","office","land"],by:["","individual","company"],transaction:["rent","sell"]},Options.onSubmit=()=>{window.history.replaceState(null,null,Options.toGetParams());const items=document.getElementById("items");items.innerHTML="",SearchHandler.getItems()},DocumentHandler.whenReady(()=>{SearchHandler.resizeHandler(),SearchHandler.getItems()}),window.addEventListener("resize",SearchHandler.resizeHandler);