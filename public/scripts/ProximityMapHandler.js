var _a;class ProximityMapHandler{static createPinElement(data){const priceElement=createSimpleElement("p","price"),typeElement=(priceElement.textContent=parseMoney(data.price)+this.curency,createSimpleElement("p","type"));var typedMaped=this.typeMap[data.type];typeElement.textContent=null!=typedMaped?typedMaped:data.type;const imageElement=createSimpleElement("div","image"),imageContainerElement=(imageElement.style.backgroundImage=`url(${data.imageURL})`,createSimpleElement("div","image-container")),extraiInfoElement=(imageContainerElement.appendChild(imageElement),createSimpleElement("div","extra-info")),containerElement=(extraiInfoElement.append(typeElement,imageContainerElement),createSimpleElement("div","pin-container")),anchorElement=(containerElement.append(extraiInfoElement,priceElement),document.createElement("a"));return anchorElement.href="/item?id="+data.id,anchorElement.appendChild(containerElement),anchorElement}static setTo(lon,lat){fetch(`/api/items/near?lon=${lon}&lat=`+lat).then(response=>response.json()).then(data=>{this.view.setCenter(ol.proj.fromLonLat([lon,lat])),this.overlayList.forEach(ov=>this.map.removeOverlay(ov)),this.overlayList=data.map(p=>this.createOverlay(p)),this.overlayList.forEach(ov=>this.map.addOverlay(ov)),this.overlayList.forEach(ov=>ov.setProperties({className:"big-z",class:"big-z",classList:"big-z"}))})}}(_a=ProximityMapHandler).curency=" Ron",ProximityMapHandler.overlayList=[],ProximityMapHandler.view=new ol.View({center:ol.proj.fromLonLat([27.568014,47.178197]),zoom:17,maxZoom:18}),ProximityMapHandler.typeMap={land:"Teren",apartment:"Apartament",office:"Office",house:"CasÄƒ"},ProximityMapHandler.createOverlay=data=>new ol.Overlay({position:ol.proj.fromLonLat([data.lon,data.lat]),positioning:"bottom-center",element:_a.createPinElement(data),stopEvent:!1}),ProximityMapHandler.map=new ol.Map({target:"map",layers:[new ol.layer.Tile({source:new ol.source.OSM})],view:_a.view});