class FilterOption{constructor(){this.setLabelTextIcon=(text,iconName)=>{this.textNode=document.createElement("span"),this.textNode.innerText=text,this.labelElement.append(this.textNode),this.labelElement.appendChild(createIcon(iconName))};let element=document.createElement("div"),labelElement=(element.className="filter-option",FilterOption.createLabelElement());labelElement.onclick=()=>{FilterOptionHandler.labelOnClickEventHandler(this)};var contentBoxElement=FilterOption.createContentBoxElement();element.appendChild(labelElement),element.appendChild(contentBoxElement),this.labelElement=labelElement,this.contentBoxElement=contentBoxElement,this.element=element}}FilterOption.createLabelElement=()=>{let labelElement=document.createElement("div");return labelElement.className="label label--flex",labelElement.setAttribute("onclick",""),labelElement},FilterOption.createContentBoxElement=()=>{let contentBoxElement=document.createElement("div");return contentBoxElement.className="content__box",contentBoxElement};class DropdownFilterOption extends FilterOption{constructor(optionList){super(),this.chosenOptionIndex=0,this.onChangeFunc=[],this.onClickEventHandler=index=>{this.chosenOptionIndex=index,this.textNode.textContent=this.options[index],this.labelElement.classList.add("label--important"),FilterOptionHandler.closeLastElement();const op=this.getOption();this.onChangeFunc.forEach(func=>func(op.index,op.text))},this.onChange=func=>{this.onChangeFunc.push(func),this.chooseOption(this.chosenOptionIndex)},this.options=optionList,this.setLabelTextIcon("","down-arrow"),this.contentBoxElement.appendChild(this.createOptionList()),this.element.classList.add("filter-option--dropdown"),this.onClickEventHandler(0)}chooseOption(index){const child=this.element.getElementsByTagName("ul")[0].children[index];child.onclick(null)}createOptionList(){let listElement=document.createElement("ul");return this.options.forEach((text,index)=>{const element=DropdownFilterOption.createOptionItem(text);element.onclick=()=>this.onClickEventHandler(index),listElement.append(element)}),listElement}static createWithDefault(optionList,defaultPlaceholder){const instance=new DropdownFilterOption([defaultPlaceholder,...optionList]),child=instance.element.getElementsByTagName("ul")[0].firstChild;return child.onclick=()=>{instance.onClickEventHandler(0),instance.labelElement.classList.remove("label--important")},child.onclick(null),instance}getOption(){return{index:this.chosenOptionIndex,text:this.options[this.chosenOptionIndex]}}isSelected(){return this.labelElement.classList.contains("label--important")}}DropdownFilterOption.createOptionItem=text=>{let element=document.createElement("li");return element.innerHTML=text,element.setAttribute("onclick",""),element};class FilterOptionHandler{}FilterOptionHandler.lastFilterOption=null,FilterOptionHandler.filterElement=document.getElementById("filter"),FilterOptionHandler.filterOptions=[],FilterOptionHandler.closeLastElement=()=>{null!=FilterOptionHandler.lastFilterOption&&(FilterOptionHandler.lastFilterOption.element.classList.remove("show"),FilterOptionHandler.lastFilterOption=null)},FilterOptionHandler.labelOnClickEventHandler=option=>{if(FilterOptionHandler.lastFilterOption){var isSameObject=FilterOptionHandler.lastFilterOption===option;if(FilterOptionHandler.closeLastElement(),isSameObject)return}option.element.classList.add("show"),FilterOptionHandler.lastFilterOption=option},FilterOptionHandler.add=option=>(FilterOptionHandler.filterOptions.push(option),null!=FilterOptionHandler.filterElement&&FilterOptionHandler.filterElement.appendChild(option.element),FilterOptionHandler);class SliderFilterOption extends FilterOption{constructor(labelText,unit){super(),this.resetSliders=()=>{this.slider1.max=this.slider2.max=(this.values.length-1).toString(),this.setSliderPosition("0",this.slider2.max)},this.getSliderPosition=()=>[this.slider1.value,this.slider2.value],this.sliderOnChangeEventHandler=__e=>{var{min,max}=this.getMinMax(),minValue=this.values[min],maxValue=this.values[max];let labelText=this.defaultLabelText;var maxIndex=this.values.length-1;0===min&&max===maxIndex?this.labelElement.classList.remove("label--important"):(labelText=min===max?""+minValue:0!==min&&max!==maxIndex?minValue+" - "+maxValue:0!==min?"minim "+minValue:"maxim "+maxValue,this.labelElement.classList.add("label--important")),this.textNode.textContent=labelText},this.asPercent=v=>100*v/(this.values.length-1),this.sliderOnInputEventHandler=__e=>{var{min,max}=this.getMinMax();this.tracker.style.left=this.asPercent(min)+"%",this.tracker.style.width=this.asPercent(max-min)+"%",this.showSmaller.textContent=this.values[min],this.showBigger.textContent=this.values[max]},this.createSlideContainer=()=>{let slideContainer=document.createElement("div"),slider1=(slideContainer.className="slider-container",document.createElement("input")),slider2=(slider1.type="range",slider1.cloneNode()),tracker=(slider1.oninput=slider2.oninput=this.sliderOnInputEventHandler,slider1.onchange=slider2.onchange=this.sliderOnChangeEventHandler,document.createElement("div"));return tracker.className="slider-container__track",slideContainer.append(tracker,slider1,slider2),this.slider1=slider1,this.slider2=slider2,this.tracker=tracker,this.set(0,100),slideContainer},this.createShowContainer=()=>{this.showSmaller=document.createElement("p"),this.showBigger=this.showSmaller.cloneNode();var iconElement=createIcon("left-right-arrow");let showContainerElement=createSimpleElement("div","show-container");return showContainerElement.append(this.showSmaller,iconElement,this.showBigger),showContainerElement},this.defaultLabelText=labelText,this.setLabelTextIcon(labelText,"left-right-arrow"),this.element.classList.add("filter-option--slider"),this.element.style.setProperty("--unit",`" ${unit}"`),this.contentBoxElement.append(this.createShowContainer(),this.createSlideContainer())}set(min,max){return this.values=SliderFilterOption.calcValues(min,max),this.resetSliders(),this}setSliderPosition(pos1,pos2){this.slider1.value=pos1,this.slider2.value=pos2,this.sliderOnInputEventHandler(null),this.sliderOnChangeEventHandler(null)}getMinMax(){var val1=Number(this.slider1.value),val2=Number(this.slider2.value);return{min:Math.min(val1,val2),max:Math.max(val1,val2)}}openRightDomain(){return this.values.push("*"),this.resetSliders(),this}openLeftDomain(){return this.values=["*",...this.values],this.resetSliders(),this}getOption(){var{min,max}=this.getMinMax(),minValue=this.values[min],maxValue=this.values[max];return 0!==min&&max!==this.values.length-1?{Max:maxValue,Min:minValue}:0!==min?{Min:minValue}:max!==this.values.length-1?{Max:maxValue,Min:minValue}:{}}isSelected(){var{min,max}=this.getMinMax();return 0!==min||max!==this.values.length-1}}SliderFilterOption.calcValues=(min,max)=>{let delta=max-min,z=Math.floor(Math.log10(delta))-1,ten2z=Math.pow(10,z),c=delta/ten2z,g,step=(g=c<25?10:c<50?25:50,Math.max(ten2z/10*g,1)),vStart=min+(step-min%step),vEnd=max-max%step,rv=[min,...Array((vEnd-vStart)/step+1).fill(null).map((_,i)=>vStart+step*i)];return rv[rv.length-1]!=max&&rv.push(max),rv.map(val=>val.toString())};class SubmitFilterOption extends FilterOption{constructor(onClick){super(),this.setLabelTextIcon("Caută acum anunțuri","magnifying-glass"),this.labelElement.classList.add("label--important"),this.element.classList.add("filter-option--submit"),this.labelElement.onclick=onClick}}